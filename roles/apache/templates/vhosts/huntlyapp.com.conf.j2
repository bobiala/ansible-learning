<VirtualHost *:443>
  ServerName huntlyapp.com
  ServerAlias www.huntlyapp.com
  ServerAdmin contact@huntlyapp.com
	
    

  ErrorLog ${APACHE_LOG_DIR}/error.log
  CustomLog ${APACHE_LOG_DIR}/access.log combined
  
  Header always set Strict-Transport-Security "max-age=0; includeSubDomains"

  SSLEngine on
  SSLProxyEngine on
  SSLProxyCheckPeerCN off
  SSLProtocol             all -SSLv2 -SSLv3
  SSLCipherSuite          ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:AES:CAMELLIA:DES-CBC3-SHA:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!aECDH:!EDH-DSS-DES-CBC3-SHA:!EDH-RSA-DES-CBC3-SHA:!KRB5-DES-CBC3-SHA
  SSLHonorCipherOrder     on
  SSLCompression          off

  SSLCertificateChainFile /etc/letsencrypt/live/huntlyapp.com/fullchain.pem
  SSLCertificateFile /etc/letsencrypt/live/huntlyapp.com/cert.pem
  SSLCertificateKeyFile /etc/letsencrypt/live/huntlyapp.com/privkey.pem

  <Location /deployments/>
    #SetEnvIf Origin "^http(s)?://(.+\.)?devoxx\.be$" origin_is=$0
    #Header always set Access-Control-Allow-Origin %{origin_is}e env=origin_is
    #Header always set Access-Control-Allow-Origin "*"
    Header always set Access-Control-Allow-Origin "http://wall.devoxx.be"
    Header always set Access-Control-Allow-Headers "X-Requested-With, Content-Type, Origin, Authorization, Accept, Client-Security-Token, Accept-Encoding"
    Header always set Access-Control-Allow-Methods "GET"
    Order allow,deny
    Allow from all
    <LimitExcept HEAD GET>
        Deny from all
    </LimitExcept>
  </Location>

  RequestHeader append Authorization "Basic Z2FtaWNvbjpYNThTZ1ByNQ=="
  ProxyPass /deployments/ http://localhost:9025/deployments/
  ProxyPassReverse /deployments/ http://localhost:9025/deployments/

  DocumentRoot /var/www/huntlyapp.com
  <Directory /var/www/huntlyapp.com/ >
    Options Indexes FollowSymLinks MultiViews
    AllowOverride FileInfo
    Order allow,deny
    allow from all
  </Directory>

#  <Location "/deployments/83/leaderboards">
#    RequestHeader append Authorization "Basic Z2FtaWNvbjpYNThTZ1ByNQo="
#    ProxyPass /deployments/83/leaderboards http://localhost:9025/deployments/83/leaderboards/
#    ProxyPassReverse /deployments/83/leaderboards http://localhost:9025/deployments/83/leaderboards/
    #ProxyPass http://gamicon:X58SgPr5@localhost:9025/deployments/83/leaderboards/
    #ProxyPassReverse http://gamicon:X58SgPr5@localhost:9025/deployments/83/leaderboards/
#  </Location>
</VirtualHost>
<VirtualHost *:80>
  ServerName huntlyapp.com
  ServerAlias www.huntlyapp.com
  ServerAdmin contact@huntlyapp.com

  RewriteEngine On
  RewriteCond %{HTTPS} off
  RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]
</VirtualHost>
#<VirtualHost *:80>
#  ServerName huntlyapp.com
#  ServerAlias www.huntlyapp.com
#  ServerAdmin contact@huntlyapp.com
	
#  ErrorLog ${APACHE_LOG_DIR}/error.log
#  CustomLog ${APACHE_LOG_DIR}/access.log combined
  
#  DocumentRoot /var/www/huntlyapp.com
#  <Directory /var/www/huntlyapp.com/ >
#    Options Indexes FollowSymLinks MultiViews
#    AllowOverride FileInfo
#    Order allow,deny
#    allow from all
#  </Directory>
#</VirtualHost>
